<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Tim Clicker - Play-to-Earn</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        :root {
            --tim-blue: #00C8FF; --dark-bg: #111; --dark-light: #222; --text-white: #fff; --text-light: #ccc;
            --success: #66bb6a; --error: #ff6b6b; --premium: #ffd700; --crypto: #8B5CF6; --ad-color: #FF6B35;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif; background: var(--dark-bg); color: var(--text-white); text-align: center;
            padding: 20px 20px 80px 20px; min-height: 100vh; position: relative;
            -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; touch-action: manipulation;
        }
        .loading {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--dark-bg);
            display: flex; flex-direction: column; align-items: center; justify-content: center; z-index: 1000;
        }
        .spinner {
            width: 50px; height: 50px; border: 5px solid var(--dark-light); border-top: 5px solid var(--tim-blue);
            border-radius: 50%; animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .btn {
            background: var(--tim-blue); color: var(--dark-bg); border: none; padding: 15px 30px;
            border-radius: 10px; font-size: 1.2rem; font-weight: bold; cursor: pointer; margin: 20px 0;
            width: 100%; max-width: 300px;
        }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .btn-premium { background: linear-gradient(45deg, var(--premium), #ff9800); color: black; }
        .btn-crypto { background: linear-gradient(45deg, var(--crypto), #6366F1); color: white; }
        .btn-ad { background: linear-gradient(45deg, var(--ad-color), #FF9500); color: white; }
        .btn-back {
            position: absolute; top: 20px; left: 20px; background: rgba(255,255,255,0.1); color: var(--text-white);
            border: 1px solid var(--tim-blue); border-radius: 50%; width: 40px; height: 40px; cursor: pointer;
            display: flex; align-items: center; justify-content: center; font-size: 20px; z-index: 100;
        }
        .game-interface { max-width: 500px; margin: 0 auto; }
        .top-stats {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;
            padding: 10px 15px; background: var(--dark-light); border-radius: 15px; border: 2px solid var(--tim-blue);
        }
        .tim-balance, .stars-stat { display: flex; flex-direction: column; align-items: flex-start; }
        .tim-amount, .stars-amount { font-size: 22px; font-weight: bold; color: var(--tim-blue); line-height: 1; }
        .stars-amount { color: var(--premium); }
        .tim-label, .stars-label { font-size: 10px; color: var(--text-light); margin-top: 2px; }
        .click-stats { display: flex; flex-direction: column; align-items: center; gap: 5px; }
        .click-stat { display: flex; align-items: center; gap: 5px; font-size: 13px; }
        .click-stat-value { color: var(--tim-blue); font-weight: bold; }
        .click-area {
            width: 80vw; height: 80vw; max-width: 300px; max-height: 300px;
            background: var(--dark-light); border-radius: 50%; margin: 30px auto;
            display: flex; align-items: center; justify-content: center; font-size: 48px; font-weight: bold;
            cursor: pointer; border: 6px solid var(--tim-blue); user-select: none; transition: transform 0.1s;
            touch-action: manipulation; box-shadow: 0 0 30px rgba(0, 200, 255, 0.3);
        }
        .click-area:active { transform: scale(0.95); }
        .bottom-tabs {
            position: fixed; bottom: 0; left: 0; right: 0; background: var(--dark-bg); padding: 10px;
            border-top: 1px solid var(--dark-light); display: flex; justify-content: space-around; z-index: 100;
        }
        .bottom-tab {
            padding: 12px 5px; background: var(--dark-light); border-radius: 8px; cursor: pointer; flex: 1;
            margin: 0 3px; text-align: center; min-width: 0; font-size: 24px; display: flex;
            align-items: center; justify-content: center; transition: all 0.3s;
        }
        .bottom-tab.active { background: var(--tim-blue); color: var(--dark-bg); font-weight: bold; box-shadow: 0 0 15px rgba(0, 200, 255, 0.5); }
        .grid-layout { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin: 20px 0; }
        .grid-card {
            background: var(--dark-light); padding: 15px; border-radius: 10px; cursor: pointer;
            border: 2px solid var(--tim-blue); text-align: center; display: flex; flex-direction: column;
            align-items: center; justify-content: center; min-height: 110px; transition: transform 0.2s;
        }
        .grid-card:hover { transform: scale(1.03); }
        .grid-card .card-title { color: var(--tim-blue); font-weight: bold; font-size: 1rem; margin-bottom: 6px; }
        .grid-card .card-desc { color: var(--text-light); font-size: 11px; line-height: 1.3; }
        .card {
            background: var(--dark-light); padding: 15px; margin: 10px 0; border-radius: 10px;
            border-left: 4px solid var(--tim-blue); text-align: left;
        }
        .card-title { color: var(--tim-blue); font-weight: bold; font-size: 1.1rem; }
        .card-cost { color: var(--text-white); font-weight: bold; background: rgba(0,0,0,0.3); padding: 5px 10px; border-radius: 5px; }
        .card-desc { color: var(--text-light); font-size: 13px; margin-bottom: 8px; line-height: 1.4; }
        .input {
            width: 100%; padding: 12px; background: rgba(255,255,255,0.1); border: 2px solid var(--tim-blue);
            border-radius: 8px; color: white; margin: 10px 0; font-size: 16px;
        }
        .notification {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%); padding: 15px 25px;
            border-radius: 10px; z-index: 1001; font-weight: bold; max-width: 90%; animation: slideIn 0.3s ease;
        }
        @keyframes slideIn { from { transform: translateX(-50%) translateY(-100%); } to { transform: translateX(-50%) translateY(0); } }
        .notification.success { background: var(--success); } .notification.error { background: var(--error); }
        .notification.premium { background: var(--premium); color: black; }
        .notification.crypto { background: var(--crypto); color: white; } .notification.ad { background: var(--ad-color); color: white; }
        .friend-card {
            background: var(--dark-light); padding: 12px; margin: 8px 0; border-radius: 10px;
            border-left: 4px solid var(--success); display: flex; justify-content: space-between; align-items: center;
        }
        .friend-info { text-align: left; flex: 1; }
        .friend-name { font-weight: bold; color: var(--text-white); margin-bottom: 4px; font-size: 14px; }
        .friend-bonus { color: var(--success); font-size: 13px; }
        .friend-btn {
            background: var(--success); color: white; border: none; padding: 6px 12px; border-radius: 5px;
            cursor: pointer; font-weight: bold; font-size: 13px;
        }
        .referral-link, .wallet-address {
            background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; font-family: monospace;
            word-break: break-all; margin: 10px 0; cursor: pointer; font-size: 13px;
        }
        .page { display: none; }
        .page.active { display: block; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .page-header { display: flex; align-items: center; justify-content: center; margin-bottom: 20px; gap: 12px; }
        .page-title { font-size: 1.5rem; color: var(--tim-blue); font-weight: bold; text-align: center; }
        .fullscreen-page {
            position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: var(--dark-bg); z-index: 200;
            padding: 20px; overflow-y: auto; display: none;
        }
        .fullscreen-page.active { display: block; animation: slideUp 0.3s ease; }
        @keyframes slideUp { from { transform: translateY(100%); } to { transform: translateY(0); } }
        .fullscreen-content { max-width: 500px; margin: 0 auto; padding-top: 60px; }
        .mrt-badge {
            background: linear-gradient(45deg, #8B5CF6, #6366F1); color: white; padding: 3px 8px;
            border-radius: 4px; font-size: 11px; font-weight: bold; margin-left: 5px;
        }
        /* –ö—Ä–∏–ø—Ç–æ-–º–∞–π–Ω–µ—Ä */
        .crypto-card { background: rgba(139, 92, 246, 0.1); border: 2px solid var(--crypto); position: relative; }
        .crypto-card::before { content: "üí∞"; position: absolute; top: 10px; right: 10px; font-size: 18px; }
        .chance-display, .ad-timer {
            background: rgba(0, 0, 0, 0.3); padding: 4px 8px; border-radius: 20px; font-size: 11px;
            margin-top: 5px; color: var(--crypto); font-weight: bold;
        }
        .crypto-effect, .ad-effect {
            position: fixed; font-size: 22px; font-weight: bold; z-index: 1002; pointer-events: none;
            animation: float 2s ease-out forwards;
        }
        .crypto-effect { color: var(--crypto); } .ad-effect { color: var(--ad-color); }
        @keyframes float {
            0% { transform: translateY(0) scale(1); opacity: 1; }
            50% { transform: translateY(-50px) scale(1.2); opacity: 0.8; }
            100% { transform: translateY(-100px) scale(1.5); opacity: 0; }
        }
        /* –†–µ–∫–ª–∞–º–∞ */
        .ad-card { background: rgba(255, 107, 53, 0.1); border: 2px solid var(--ad-color); position: relative; }
        .ad-card::before { content: "üì∫"; position: absolute; top: 10px; right: 10px; font-size: 18px; }
        .ad-timer { color: var(--ad-color); }
        .ad-watch-progress { width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; margin-top: 10px; overflow: hidden; }
        .ad-watch-fill { height: 100%; background: var(--ad-color); transition: width 0.3s ease; }
        /* Telegram Stars - –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å */
        .stars-section { background: var(--dark-light); padding: 15px; border-radius: 10px; margin: 10px 0; border: 2px solid var(--premium); }
        .stars-balance { text-align: center; margin-bottom: 20px; }
        .balance-amount { font-size: 32px; font-weight: bold; color: var(--premium); margin: 10px 0; }
        .balance-label { color: var(--text-light); font-size: 14px; }
        .stars-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0; }
        .stars-package {
            background: rgba(255, 215, 0, 0.1); border: 1px solid var(--premium); border-radius: 8px;
            padding: 12px; cursor: pointer; transition: all 0.2s; text-align: center;
        }
        .stars-package:hover { transform: translateY(-2px); background: rgba(255, 215, 0, 0.15); }
        .stars-icon { font-size: 22px; margin-bottom: 4px; }
        .stars-count { font-size: 16px; font-weight: bold; color: var(--premium); }
        /* TIM –∑–∞ –∑–≤–µ–∑–¥—ã - —Ç–∞–∫–æ–π –∂–µ —Å—Ç–∏–ª—å –∫–∞–∫ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ */
        .tim-packages-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin: 15px 0; }
        .tim-package-compact {
            background: rgba(0, 200, 255, 0.1); border: 1px solid var(--tim-blue); border-radius: 8px;
            padding: 12px; cursor: pointer; transition: all 0.2s; text-align: center;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .tim-package-compact:hover { transform: translateY(-2px); background: rgba(0, 200, 255, 0.15); }
        .tim-cost { font-size: 18px; font-weight: bold; color: var(--premium); display: flex; align-items: center; justify-content: center; gap: 5px; margin-bottom: 5px; }
        .tim-reward { font-size: 16px; font-weight: bold; color: var(--tim-blue); margin-bottom: 3px; }
        .tim-benefit { font-size: 11px; color: var(--text-light); }
        .section-title {
            color: var(--tim-blue); font-weight: bold; font-size: 1.2rem; margin-bottom: 15px;
            text-align: center; display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –¥—Ä—É–∑–µ–π */
        .bonus-info {
            background: rgba(102, 187, 106, 0.1); border: 1px solid var(--success); border-radius: 8px;
            padding: 12px; margin: 10px 0; text-align: left;
        }
        .bonus-list { margin: 10px 0; padding-left: 20px; }
        .bonus-list li { margin: 5px 0; font-size: 13px; color: var(--text-light); }
        .referral-stats {
            display: flex; justify-content: space-between; margin: 15px 0;
            background: rgba(0, 200, 255, 0.1); padding: 10px; border-radius: 8px;
        }
        .stat-item { text-align: center; flex: 1; }
        .stat-value { font-size: 18px; font-weight: bold; color: var(--tim-blue); }
        .stat-label { font-size: 11px; color: var(--text-light); margin-top: 3px; }
    </style>
</head>
<body>
    <div id="app">
        <div class="loading" v-if="!isReady">
            <div class="spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–≥—Ä—ã...</p>
        </div>

        <div class="game-interface" v-if="isReady">
            <div class="top-stats">
                <div class="tim-balance">
                    <div class="tim-amount">{{ formatNumber(coins) }}</div>
                    <div class="tim-label">TIM</div>
                </div>
                <div class="click-stats">
                    <div class="click-stat">
                        <span>üëÜ</span>
                        <span class="click-stat-value">+{{ profitPerTap.toFixed(1) }}</span>
                    </div>
                    <div class="click-stat">
                        <span>‚è±Ô∏è</span>
                        <span class="click-stat-value">{{ autoClickers }}/–º–∏–Ω</span>
                    </div>
                </div>
                <div class="stars-stat">
                    <div class="stars-amount">‚≠ê {{ telegramStars }}</div>
                    <div class="stars-label">STARS</div>
                </div>
            </div>

            <!-- –ü–æ—Ä—è–¥–æ–∫ –≤–∫–ª–∞–¥–æ–∫: –¥—Ä—É–∑—å—è ‚Üí —É–ª—É—á—à–µ–Ω–∏—è ‚Üí –∫–ª–∏–∫–µ—Ä ‚Üí —Ä–µ–∫–ª–∞–º–∞ ‚Üí —Ç–æ–∫–µ–Ω—ã -->
            <div class="page" :class="{active: activePage === 'friends'}">
                <div class="card">
                    <div class="card-title">ü§ù –ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π</div>
                    <div class="card-desc">–ó–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π—Ç–µ TIM –∑–∞ –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–≥–æ –¥—Ä—É–≥–∞!</div>
                    
                    <div class="referral-stats">
                        <div class="stat-item">
                            <div class="stat-value">{{ friends.length }}</div>
                            <div class="stat-label">–î—Ä—É–∑–µ–π</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">{{ formatNumber(totalReferralEarnings) }}</div>
                            <div class="stat-label">–ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">{{ formatNumber(totalPassiveEarnings) }}/–¥–µ–Ω—å</div>
                            <div class="stat-label">–ü–∞—Å—Å–∏–≤–Ω–æ</div>
                        </div>
                    </div>
                </div>

                <div class="grid-layout">
                    <div class="grid-card" @click="generateInvite">
                        <div style="font-size: 28px;">üì§</div>
                        <div class="card-title">–ü—Ä–∏–≥–ª–∞—Å–∏—Ç—å –¥—Ä—É–≥–∞</div>
                        <div class="card-desc">–ü–æ–ª—É—á–∏—Ç–µ –±–æ–Ω—É—Å –∑–∞ –∫–∞–∂–¥–æ–≥–æ –¥—Ä—É–≥–∞</div>
                    </div>
                    <div class="grid-card" @click="copyReferral">
                        <div style="font-size: 28px;">üîó</div>
                        <div class="card-title">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞</div>
                        <div class="card-desc">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</div>
                    </div>
                </div>

                <div class="bonus-info">
                    <div class="card-title" style="color: var(--success);">üéÅ –°–∏—Å—Ç–µ–º–∞ –±–æ–Ω—É—Å–æ–≤:</div>
                    <ul class="bonus-list">
                        <li><strong>–ü–µ—Ä–≤—ã–µ 5 –¥—Ä—É–∑–µ–π:</strong> 50,000 TIM —Å—Ä–∞–∑—É</li>
                        <li><strong>–° 6-–≥–æ –¥—Ä—É–≥–∞:</strong> 10,000 TIM —Å—Ä–∞–∑—É</li>
                        <li><strong>–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥:</strong> 1% –æ—Ç –¥–æ—Ö–æ–¥–∞ –¥—Ä—É–≥–∞ –∑–∞ –∫–ª–∏–∫–∏</li>
                        <li><strong>–î–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 1M TIM:</strong> +10,000 TIM –±–æ–Ω—É—Å</li>
                    </ul>
                </div>

                <div v-if="friends.length > 0">
                    <div class="card">
                        <div class="card-title">üë• –í–∞—à–∏ –¥—Ä—É–∑—å—è ({{ friends.length }})</div>
                        <div class="card-desc">–û–±—â–∏–π –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥: +{{ totalPassiveEarnings.toFixed(1) }} TIM/–∫–ª–∏–∫</div>
                    </div>
                    <div v-for="friend in friends" :key="friend.id" class="friend-card">
                        <div class="friend-info">
                            <div class="friend-name">{{ friend.name }}</div>
                            <div class="card-desc">–£—Ä–æ–≤–µ–Ω—å: {{ friend.level }}</div>
                            <div class="friend-bonus">–ü–∞—Å—Å–∏–≤–Ω–æ: +{{ friend.passiveIncome.toFixed(2) }} TIM/–∫–ª–∏–∫</div>
                            <div v-if="friend.bonusClaimed" style="color: var(--success); font-size: 11px;">–ë–æ–Ω—É—Å –ø–æ–ª—É—á–µ–Ω</div>
                        </div>
                        <button class="friend-btn" @click="claimFriendBonus(friend.id)" v-if="!friend.bonusClaimed && friend.canClaim">
                            –ó–∞–±—Ä–∞—Ç—å
                        </button>
                        <div v-else-if="friend.bonusClaimed" style="color: var(--success); font-weight: bold;">‚úÖ</div>
                    </div>
                </div>
            </div>

            <div class="page" :class="{active: activePage === 'upgrades'}">
                <div class="grid-layout">
                    <div class="grid-card" @click="buyUpgrade(1)">
                        <div class="card-title">{{ upgrades[0].name }}</div>
                        <div class="card-cost">{{ formatNumber(upgrades[0].cost) }} TIM</div>
                        <div class="card-desc">{{ upgrades[0].description }}</div>
                        <div class="card-desc">–£—Ä–æ–≤–µ–Ω—å: {{ upgrades[0].level }}</div>
                    </div>
                    <div class="grid-card" @click="buyUpgrade(2)">
                        <div class="card-title">{{ upgrades[1].name }}</div>
                        <div class="card-cost">{{ formatNumber(upgrades[1].cost) }} TIM</div>
                        <div class="card-desc">{{ upgrades[1].description }}</div>
                        <div class="card-desc">–£—Ä–æ–≤–µ–Ω—å: {{ upgrades[1].level }}</div>
                    </div>
                    <div class="grid-card" @click="buyUpgrade(3)">
                        <div class="card-title">{{ upgrades[2].name }}</div>
                        <div class="card-cost">{{ formatNumber(upgrades[2].cost) }} TIM</div>
                        <div class="card-desc">{{ upgrades[2].description }}</div>
                        <div class="card-desc">–£—Ä–æ–≤–µ–Ω—å: {{ upgrades[2].level }}</div>
                    </div>
                    <div class="grid-card crypto-card" @click="activateCryptoMiner">
                        <div class="card-title" style="color: var(--crypto);">–ö—Ä–∏–ø—Ç–æ-–º–∞–π–Ω–µ—Ä</div>
                        <div class="card-cost">{{ formatNumber(cryptoMinerCost) }} TIM</div>
                        <div class="card-desc">–®–∞–Ω—Å –Ω–∞–π—Ç–∏ 1 MRT –ø—Ä–∏ –∫–ª–∏–∫–µ</div>
                        <div class="chance-display" v-if="cryptoMinerActive && cryptoMinerTimeLeft > 0">
                            –†–∞–±–æ—Ç–∞–µ—Ç: {{ cryptoMinerTimeLeft }} —Å–µ–∫
                        </div>
                        <div class="chance-display" v-else>
                            –®–∞–Ω—Å: {{ (currentCryptoChance * 100).toFixed(4) }}%
                        </div>
                    </div>
                </div>
            </div>

            <div class="page" :class="{active: activePage === 'click'}">
                <div class="click-area" @click="mine">
                    CLICK
                </div>
            </div>

            <div class="page" :class="{active: activePage === 'ads'}">
                <div class="card">
                    <div class="card-title">üì∫ –†–µ–∫–ª–∞–º–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã</div>
                    <div class="card-desc">–ù–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã!</div>
                </div>
                
                <div class="grid-layout">
                    <div class="grid-card ad-card" @click="watchAd('daily')">
                        <div class="card-title" style="color: var(--ad-color);">üì∫ –ï–∂–µ–¥–Ω–µ–≤–Ω–∞—è</div>
                        <div class="card-desc" v-if="!ads.daily.available">
                            –ß–µ—Ä–µ–∑: {{ formatTime(ads.daily.cooldown) }}
                        </div>
                        <div class="card-desc" v-else>
                            –ù–∞–≥—Ä–∞–¥–∞: {{ formatNumber(ads.daily.reward) }} TIM
                        </div>
                        <div class="ad-timer">{{ ads.daily.watchedToday }}/3 —Å–µ–≥–æ–¥–Ω—è</div>
                    </div>
                    <div class="grid-card ad-card" @click="watchAd('hourly')">
                        <div class="card-title" style="color: var(--ad-color);">‚è∞ –ß–∞—Å–æ–≤–∞—è</div>
                        <div class="card-desc" v-if="!ads.hourly.available">
                            –ß–µ—Ä–µ–∑: {{ formatTime(ads.hourly.cooldown) }}
                        </div>
                        <div class="card-desc" v-else>
                            –ù–∞–≥—Ä–∞–¥–∞: {{ formatNumber(ads.hourly.reward) }} TIM
                        </div>
                    </div>
                    <div class="grid-card ad-card" @click="watchAd('big')">
                        <div class="card-title" style="color: var(--ad-color);">üéÅ –ë–æ–ª—å—à–∞—è</div>
                        <div class="card-desc" v-if="!ads.big.available">–ó–∞–≤—Ç—Ä–∞</div>
                        <div class="card-desc" v-else>–ù–∞–≥—Ä–∞–¥–∞: {{ formatNumber(ads.big.reward) }} TIM</div>
                    </div>
                    <div class="grid-card ad-card" @click="watchAd('instant')">
                        <div class="card-title" style="color: var(--ad-color);">‚ö° –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è</div>
                        <div class="card-desc">–ù–∞–≥—Ä–∞–¥–∞: {{ formatNumber(ads.instant.reward) }} TIM</div>
                        <div class="ad-timer">–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π</div>
                    </div>
                </div>
                
                <div v-if="adWatching.active" class="card">
                    <div class="card-title">üì∫ –°–º–æ—Ç—Ä–∏—Ç–µ —Ä–µ–∫–ª–∞–º—É...</div>
                    <div class="card-desc">–ù–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ –∏–≥—Ä—É! –ù–∞–≥—Ä–∞–¥–∞ –±—É–¥–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–∞ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞.</div>
                    <div class="card-desc">–û—Å—Ç–∞–ª–æ—Å—å: {{ adWatching.timeLeft }} —Å–µ–∫.</div>
                    <div class="ad-watch-progress">
                        <div class="ad-watch-fill" :style="{width: adWatching.progress + '%'}"></div>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-title">üí∞ –í—Å–µ–≥–æ –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –∑–∞ —Ä–µ–∫–ª–∞–º—É</div>
                    <div class="card-desc">{{ formatNumber(totalAdEarnings) }} TIM</div>
                    <div class="card-desc" style="font-size: 12px; color: var(--ad-color);">
                        ‚ö†Ô∏è –ù–∞–≥—Ä–∞–¥—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ä–µ–∫–ª–∞–º—ã!
                    </div>
                </div>
            </div>

            <div class="page" :class="{active: activePage === 'tokens'}">
                <div class="grid-layout">
                    <div class="grid-card" @click="openFullscreen('convert')">
                        <div style="font-size: 28px;">üí±</div>
                        <div class="card-title">–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è</div>
                        <div class="card-desc">1,000,000 TIM = 1 MRT</div>
                    </div>
                    <div class="grid-card" @click="openFullscreen('withdraw')">
                        <div style="font-size: 28px;">üí∞</div>
                        <div class="card-title">–í—ã–≤–æ–¥ <span class="mrt-badge">MRT</span></div>
                        <div class="card-desc">–ú–∏–Ω–∏–º—É–º 10 MRT</div>
                    </div>
                    <div class="grid-card" @click="openFullscreen('wallet')">
                        <div style="font-size: 28px;">üëõ</div>
                        <div class="card-title">–ö–æ—à–µ–ª–µ–∫</div>
                        <div class="card-desc">–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—ã–ø–ª–∞—Ç</div>
                    </div>
                    <div class="grid-card" @click="openFullscreen('stars')">
                        <div style="font-size: 28px;">‚≠ê</div>
                        <div class="card-title">Telegram Stars</div>
                        <div class="card-desc">–ü–æ–∫—É–ø–∫–∞ –∏ –ø—Ä–µ–º–∏—É–º</div>
                    </div>
                </div>
            </div>

            <!-- Telegram Stars Fullscreen -->
            <div class="fullscreen-page" :class="{active: fullscreenPage === 'stars'}">
                <button class="btn-back" @click="closeFullscreen">‚Üê</button>
                <div class="fullscreen-content">
                    <div class="page-header">
                        <div style="font-size: 36px;">‚≠ê</div>
                        <div class="page-title">Telegram Stars</div>
                    </div>
                    
                    <div class="stars-section">
                        <div class="stars-balance">
                            <div class="balance-amount">‚≠ê {{ telegramStars }}</div>
                            <div class="balance-label">–í–∞—à –±–∞–ª–∞–Ω—Å –∑–≤–µ–∑–¥</div>
                        </div>
                    </div>

                    <div class="stars-section">
                        <div class="section-title">
                            <span>üíé</span>
                            <span>–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</span>
                        </div>
                        <div class="stars-grid">
                            <div class="stars-package" @click="buyStars(100)">
                                <div class="stars-icon">‚≠ê</div>
                                <div class="stars-count">100</div>
                            </div>
                            <div class="stars-package" @click="buyStars(500)">
                                <div class="stars-icon">‚≠ê</div>
                                <div class="stars-count">500</div>
                            </div>
                            <div class="stars-package" @click="buyStars(1000)">
                                <div class="stars-icon">‚≠ê</div>
                                <div class="stars-count">1000</div>
                            </div>
                            <div class="stars-package" @click="buyStars(5000)">
                                <div class="stars-icon">‚≠ê</div>
                                <div class="stars-count">5000</div>
                            </div>
                        </div>
                    </div>

                    <div class="stars-section">
                        <div class="section-title">
                            <span>ü™ô</span>
                            <span>–ö—É–ø–∏—Ç—å TIM –∑–∞ –∑–≤–µ–∑–¥—ã</span>
                        </div>
                        <div class="tim-packages-grid">
                            <div class="tim-package-compact" @click="buyTimForStars(50, 1000000)">
                                <div class="tim-cost">
                                    <span>‚≠ê</span>
                                    <span>50</span>
                                </div>
                                <div class="tim-reward">1,000,000 TIM</div>
                                <div class="tim-benefit">–ë–∞–∑–æ–≤—ã–π –ø–∞–∫–µ—Ç</div>
                            </div>
                            <div class="tim-package-compact" @click="buyTimForStars(100, 3000000)">
                                <div class="tim-cost">
                                    <span>‚≠ê</span>
                                    <span>100</span>
                                </div>
                                <div class="tim-reward">3,000,000 TIM</div>
                                <div class="tim-benefit">+200% –≤—ã–≥–æ–¥—ã</div>
                            </div>
                            <div class="tim-package-compact" @click="buyTimForStars(200, 8000000)">
                                <div class="tim-cost">
                                    <span>‚≠ê</span>
                                    <span>200</span>
                                </div>
                                <div class="tim-reward">8,000,000 TIM</div>
                                <div class="tim-benefit">+300% –≤—ã–≥–æ–¥—ã</div>
                            </div>
                            <div class="tim-package-compact" @click="buyTimForStars(500, 25000000)">
                                <div class="tim-cost">
                                    <span>‚≠ê</span>
                                    <span>500</span>
                                </div>
                                <div class="tim-reward">25,000,000 TIM</div>
                                <div class="tim-benefit">+400% –≤—ã–≥–æ–¥—ã</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Other Fullscreen Pages -->
            <div class="fullscreen-page" :class="{active: fullscreenPage === 'convert'}">
                <button class="btn-back" @click="closeFullscreen">‚Üê</button>
                <div class="fullscreen-content">
                    <div class="page-header">
                        <div style="font-size: 36px;">üí±</div>
                        <div class="page-title">–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è TIM ‚Üí MRT</div>
                    </div>
                    <div class="card">
                        <div class="card-desc">–í–∞—à–∏ —Ç–æ–∫–µ–Ω—ã: {{ realTokens }} <span class="mrt-badge">MRT</span></div>
                        <div class="card-desc">–í–∞—à–∏ –º–æ–Ω–µ—Ç—ã: {{ formatNumber(coins) }} TIM</div>
                        <div class="card-desc">–ö—É—Ä—Å: 1,000,000 TIM = 1 MRT</div>
                        <input type="number" class="input" v-model="convertAmount" placeholder="–°—É–º–º–∞ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏" min="1000000">
                        <button class="btn" @click="convertTokens" :disabled="convertAmount < 1000000 || coins < convertAmount">
                            –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ MRT
                        </button>
                    </div>
                </div>
            </div>

            <div class="fullscreen-page" :class="{active: fullscreenPage === 'withdraw'}">
                <button class="btn-back" @click="closeFullscreen">‚Üê</button>
                <div class="fullscreen-content">
                    <div class="page-header">
                        <div style="font-size: 36px;">üí∞</div>
                        <div class="page-title">–í—ã–≤–æ–¥ MRT —Ç–æ–∫–µ–Ω–æ–≤</div>
                    </div>
                    <div class="card">
                        <div class="card-desc">–í–∞—à–∏ —Ç–æ–∫–µ–Ω—ã: {{ realTokens }} <span class="mrt-badge">MRT</span></div>
                        <div class="card-desc">–ú–∏–Ω–∏–º—É–º –¥–ª—è –≤—ã–≤–æ–¥–∞: 10 MRT</div>
                        <input type="number" class="input" v-model="withdrawAmount" placeholder="–°—É–º–º–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞" min="10">
                        <button class="btn" @click="withdrawTokens" :disabled="withdrawAmount < 10 || realTokens < withdrawAmount">
                            –í—ã–≤–µ—Å—Ç–∏ MRT
                        </button>
                    </div>
                </div>
            </div>

            <div class="fullscreen-page" :class="{active: fullscreenPage === 'wallet'}">
                <button class="btn-back" @click="closeFullscreen">‚Üê</button>
                <div class="fullscreen-content">
                    <div class="page-header">
                        <div style="font-size: 36px;">üëõ</div>
                        <div class="page-title">–ö–æ—à–µ–ª–µ–∫ Polygon</div>
                    </div>
                    <div class="card">
                        <div class="card-desc">–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ MRT</div>
                        <input type="text" class="input" v-model="polygonWalletInput" placeholder="0x..." @keyup.enter="saveWallet">
                        <button class="btn" @click="saveWallet" :disabled="!isValidWallet">
                            {{ polygonWalletAddress ? '–û–±–Ω–æ–≤–∏—Ç—å' : '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å' }}
                        </button>
                        <div v-if="polygonWalletAddress" style="margin-top: 20px;">
                            <div class="card-desc">–¢–µ–∫—É—â–∏–π –∞–¥—Ä–µ—Å:</div>
                            <div class="wallet-address" @click="copyWallet">{{ polygonWalletAddress }}</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- –í–∫–ª–∞–¥–∫–∏ –≤ –Ω–æ–≤–æ–º –ø–æ—Ä—è–¥–∫–µ: –¥—Ä—É–∑—å—è ‚Üí —É–ª—É—á—à–µ–Ω–∏—è ‚Üí –∫–ª–∏–∫–µ—Ä ‚Üí —Ä–µ–∫–ª–∞–º–∞ ‚Üí —Ç–æ–∫–µ–Ω—ã -->
            <div class="bottom-tabs">
                <div class="bottom-tab" :class="{active: activePage === 'friends'}" @click="setPage('friends')" title="–î—Ä—É–∑—å—è">üë•</div>
                <div class="bottom-tab" :class="{active: activePage === 'upgrades'}" @click="setPage('upgrades')" title="–£–ª—É—á—à–µ–Ω–∏—è">‚ö°</div>
                <div class="bottom-tab" :class="{active: activePage === 'click'}" @click="setPage('click')" title="–ö–ª–∏–∫–µ—Ä">üëÜ</div>
                <div class="bottom-tab" :class="{active: activePage === 'ads'}" @click="setPage('ads')" title="–†–µ–∫–ª–∞–º–∞">üì∫</div>
                <div class="bottom-tab" :class="{active: activePage === 'tokens'}" @click="setPage('tokens')" title="–¢–æ–∫–µ–Ω—ã">üí∞</div>
            </div>
        </div>

        <div v-for="(effect, index) in cryptoEffects" :key="index" 
             class="crypto-effect"
             :style="{left: effect.x + 'px', top: effect.y + 'px'}">+1 MRT</div>
        <div v-for="(effect, index) in adEffects" :key="'ad-' + index" 
             class="ad-effect"
             :style="{left: effect.x + 'px', top: effect.y + 'px'}">+{{ formatNumber(effect.amount) }}</div>

        <div class="notification success" v-if="notification.show && notification.type === 'success'">{{ notification.message }}</div>
        <div class="notification error" v-if="notification.show && notification.type === 'error'">{{ notification.message }}</div>
        <div class="notification premium" v-if="notification.show && notification.type === 'premium'">{{ notification.message }}</div>
        <div class="notification crypto" v-if="notification.show && notification.type === 'crypto'">{{ notification.message }}</div>
        <div class="notification ad" v-if="notification.show && notification.type === 'ad'">{{ notification.message }}</div>
    </div>

    <script>
        const { createApp, ref, computed, onMounted } = Vue;
        
        createApp({
            setup() {
                // –û—Å–Ω–æ–≤–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è
                const isReady = ref(false);
                const coins = ref(0);
                const profitPerTap = ref(1);
                const autoClickers = ref(0);
                const activePage = ref('click');
                const fullscreenPage = ref('');
                const realTokens = ref(0);
                const polygonWalletAddress = ref('');
                const polygonWalletInput = ref('');
                const convertAmount = ref('');
                const withdrawAmount = ref('');
                const friends = ref([]);
                const userId = ref('user_' + Math.random().toString(36).substr(2, 9));
                const telegramStars = ref(0);
                const cryptoMinerLevel = ref(0);
                const cryptoMinerActive = ref(false);
                const cryptoMinerEndTime = ref(0);
                const cryptoMinerChance = ref(0.00001);
                const cryptoEffects = ref([]);
                const ads = ref({
                    daily: { available: true, reward: 50000, cooldown: 0, watchedToday: 0 },
                    hourly: { available: true, reward: 10000, cooldown: 0 },
                    big: { available: true, reward: 200000 },
                    instant: { available: true, reward: 5000 }
                });
                const adWatching = ref({ active: false, timeLeft: 30, progress: 0, type: '' });
                const totalAdEarnings = ref(0);
                const totalReferralEarnings = ref(0);
                const adEffects = ref([]);
                const notification = ref({ show: false, message: '', type: 'success' });
                const lastClickTime = ref(0);
                const clickCooldown = 100;
                const upgrades = ref([
                    { id: 1, name: '–£—Å–∏–ª–∏—Ç–µ–ª—å –∫–ª–∏–∫–∞', description: '+0.5 TIM –∑–∞ –∫–ª–∏–∫', cost: 1000, level: 0 },
                    { id: 2, name: '–ê–≤—Ç–æ–º–∞–π–Ω–µ—Ä', description: '+5 TIM –≤ –º–∏–Ω—É—Ç—É', cost: 5000, level: 0 },
                    { id: 3, name: '–ú–Ω–æ–∂–∏—Ç–µ–ª—å', description: 'x1.5 –¥–æ—Ö–æ–¥ –æ—Ç –∫–ª–∏–∫–æ–≤', cost: 25000, level: 0 }
                ]);
                
                // –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
                const totalPassiveEarnings = computed(() => {
                    return friends.value.reduce((sum, friend) => {
                        return sum + friend.passiveIncome;
                    }, 0);
                });
                
                const isValidWallet = computed(() => {
                    const addr = polygonWalletInput.value.trim();
                    return addr.startsWith('0x') && addr.length === 42;
                });
                const currentCryptoChance = computed(() => cryptoMinerChance.value * (1 + cryptoMinerLevel.value * 0.5));
                const cryptoMinerTimeLeft = computed(() => {
                    if (!cryptoMinerActive.value) return 0;
                    const now = Date.now();
                    const timeLeft = cryptoMinerEndTime.value - now;
                    return timeLeft > 0 ? Math.ceil(timeLeft / 1000) : 0;
                });
                const cryptoMinerCost = computed(() => 100000 + (cryptoMinerLevel.value * 50000));
                
                // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                function formatNumber(num) {
                    if (num >= 1000000000) return (num / 1000000000).toFixed(2) + 'B';
                    if (num >= 1000000) return (num / 1000000).toFixed(2) + 'M';
                    if (num >= 1000) return (num / 1000).toFixed(2) + 'K';
                    return Math.floor(num);
                }
                
                function formatTime(seconds) {
                    if (seconds >= 3600) return Math.floor(seconds / 3600) + '—á ' + Math.floor((seconds % 3600) / 60) + '–º';
                    if (seconds >= 60) return Math.floor(seconds / 60) + '–º ' + (seconds % 60) + '—Å';
                    return seconds + '—Å';
                }
                
                function showNotify(msg, type = 'success') {
                    notification.value = { show: true, message: msg, type };
                    setTimeout(() => notification.value.show = false, 3000);
                }
                
                function addCryptoEffect(x, y) {
                    cryptoEffects.value.push({ x, y });
                    setTimeout(() => cryptoEffects.value.shift(), 2000);
                }
                
                function addAdEffect(x, y, amount) {
                    adEffects.value.push({ x, y, amount });
                    setTimeout(() => adEffects.value.shift(), 2000);
                }
                
                // –û—Å–Ω–æ–≤–Ω—ã–µ –∏–≥—Ä–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                function mine() {
                    const now = Date.now();
                    if (now - lastClickTime.value < clickCooldown) return;
                    lastClickTime.value = now;
                    
                    // –û—Å–Ω–æ–≤–Ω–æ–π –∑–∞—Ä–∞–±–æ—Ç–æ–∫
                    let earned = profitPerTap.value;
                    coins.value += earned;
                    
                    // –ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥ –æ—Ç –¥—Ä—É–∑–µ–π
                    if (friends.value.length > 0) {
                        const passiveEarned = totalPassiveEarnings.value;
                        coins.value += passiveEarned;
                    }
                    
                    // –ö—Ä–∏–ø—Ç–æ-–º–∞–π–Ω–µ—Ä
                    if (cryptoMinerActive.value && cryptoMinerTimeLeft.value > 0 && Math.random() < currentCryptoChance.value) {
                        realTokens.value += 1;
                        showNotify(`üé∞ –ö—Ä–∏–ø—Ç–æ-–º–∞–π–Ω–µ—Ä –Ω–∞—à–µ–ª 1 MRT!`, 'crypto');
                        const clickArea = document.querySelector('.click-area');
                        if (clickArea) {
                            const rect = clickArea.getBoundingClientRect();
                            addCryptoEffect(rect.left + rect.width / 2, rect.top + rect.height / 2);
                        }
                    }
                    
                    saveGame();
                }
                
                function buyUpgrade(id) {
                    const upgrade = upgrades.value.find(u => u.id === id);
                    if (!upgrade || coins.value < upgrade.cost) return;
                    coins.value -= upgrade.cost;
                    upgrade.level++;
                    upgrade.cost = Math.floor(upgrade.cost * (id === 3 ? 3 : 2.5));
                    if (id === 1) profitPerTap.value += 0.5;
                    if (id === 2) autoClickers.value += 5;
                    if (id === 3) profitPerTap.value *= 1.5;
                    showNotify('–£–ª—É—á—à–µ–Ω–∏–µ –∫—É–ø–ª–µ–Ω–æ!');
                    saveGame();
                }
                
                function activateCryptoMiner() {
                    const cost = cryptoMinerCost.value;
                    if (coins.value < cost) {
                        showNotify(`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ TIM! –ù—É–∂–Ω–æ ${formatNumber(cost)} TIM`, 'error');
                        return;
                    }
                    if (cryptoMinerActive.value && cryptoMinerTimeLeft.value > 0) {
                        showNotify('–ö—Ä–∏–ø—Ç–æ-–º–∞–π–Ω–µ—Ä —É–∂–µ –∞–∫—Ç–∏–≤–µ–Ω!', 'error');
                        return;
                    }
                    coins.value -= cost;
                    cryptoMinerActive.value = true;
                    cryptoMinerLevel.value++;
                    cryptoMinerEndTime.value = Date.now() + 60000;
                    showNotify(`–ö—Ä–∏–ø—Ç–æ-–º–∞–π–Ω–µ—Ä –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω –Ω–∞ 1 –º–∏–Ω—É—Ç—É!`, 'crypto');
                    saveGame();
                }
                
                function watchAd(type) {
                    const ad = ads.value[type];
                    
                    if (!ad.available && type !== 'instant') {
                        showNotify('–†–µ–∫–ª–∞–º–∞ –µ—â–µ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞!', 'error');
                        return;
                    }
                    
                    if (adWatching.value.active) {
                        showNotify('–î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π —Ä–µ–∫–ª–∞–º—ã!', 'error');
                        return;
                    }
                    
                    // –ù–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ—Å–º–æ—Ç—Ä
                    adWatching.value = { 
                        active: true, 
                        timeLeft: 30, 
                        progress: 0, 
                        type: type
                    };
                    
                    const interval = setInterval(() => {
                        if (adWatching.value.timeLeft <= 0) {
                            clearInterval(interval);
                            
                            // –ù–∞—á–∏—Å–ª—è–µ–º –Ω–∞–≥—Ä–∞–¥—É
                            let reward = ad.reward;
                            
                            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤
                            if (type === 'daily') {
                                ad.watchedToday++;
                                if (ad.watchedToday >= 3) {
                                    ad.available = false;
                                    ad.cooldown = 24 * 60 * 60;
                                }
                            } else if (type === 'hourly') {
                                ad.available = false;
                                ad.cooldown = 60 * 60;
                            } else if (type === 'big') {
                                ad.available = false;
                            }
                            
                            // –ù–∞—á–∏—Å–ª—è–µ–º –Ω–∞–≥—Ä–∞–¥—É
                            coins.value += reward;
                            totalAdEarnings.value += reward;
                            
                            // –î–æ–±–∞–≤–ª—è–µ–º —ç—Ñ—Ñ–µ–∫—Ç
                            const adCard = document.querySelector('.ad-card');
                            if (adCard) {
                                const rect = adCard.getBoundingClientRect();
                                addAdEffect(rect.left + rect.width / 2, rect.top + rect.height / 2, reward);
                            }
                            
                            adWatching.value.active = false;
                            showNotify(`üéâ –ü–æ–ª—É—á–µ–Ω–æ ${formatNumber(reward)} TIM –∑–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∫–ª–∞–º—ã!`, 'ad');
                            saveGame();
                            return;
                        }
                        
                        adWatching.value.timeLeft--;
                        adWatching.value.progress = ((30 - adWatching.value.timeLeft) / 30) * 100;
                    }, 1000);
                }
                
                // –§—É–Ω–∫—Ü–∏–∏ –¥—Ä—É–∑–µ–π –∏ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
                function generateInvite() {
                    const inviteCode = Math.random().toString(36).substr(2, 8).toUpperCase();
                    showNotify(`–ö–æ–¥ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è: ${inviteCode}. –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å –¥—Ä—É–≥–æ–º!`);
                }
                
                function copyReferral() {
                    const link = `https://t.me/–≤–∞—à_–±–æ—Ç?start=${userId.value}`;
                    navigator.clipboard.writeText(link)
                        .then(() => showNotify('–°—Å—ã–ª–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞! –ü–æ–¥–µ–ª–∏—Ç–µ—Å—å —Å –¥—Ä—É–≥–æ–º'))
                        .catch(() => showNotify('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è', 'error'));
                }
                
                function claimFriendBonus(friendId) {
                    const friend = friends.value.find(f => f.id === friendId);
                    if (!friend || friend.bonusClaimed) return;
                    
                    // –í—ã—á–∏—Å–ª—è–µ–º –±–æ–Ω—É—Å –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥—Ä—É–∑–µ–π
                    let bonus = 0;
                    if (friends.value.length <= 5) {
                        bonus = 50000;
                    } else {
                        bonus = 10000;
                    }
                    
                    coins.value += bonus;
                    totalReferralEarnings.value += bonus;
                    friend.bonusClaimed = true;
                    
                    showNotify(`üéâ –ü–æ–ª—É—á–µ–Ω–æ ${formatNumber(bonus)} TIM –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ –¥—Ä—É–≥–∞!`, 'success');
                    saveGame();
                }
                
                function addFriend(name) {
                    // –°–ª—É—á–∞–π–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –∏ –ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥
                    const level = Math.floor(Math.random() * 10) + 1;
                    const passiveIncome = (Math.random() * 0.5 + 0.1) * level;
                    
                    const newFriend = {
                        id: Date.now(),
                        name: name || `–î—Ä—É–≥ ${friends.value.length + 1}`,
                        level: level,
                        passiveIncome: passiveIncome,
                        bonusClaimed: false,
                        canClaim: true,
                        coins: Math.floor(Math.random() * 500000) + 10000,
                        joinedAt: Date.now()
                    };
                    
                    friends.value.push(newFriend);
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ 1M TIM —É –¥—Ä—É–≥–∞ (—Å–∏–º—É–ª—è—Ü–∏—è)
                    if (newFriend.coins >= 1000000) {
                        setTimeout(() => {
                            coins.value += 10000;
                            totalReferralEarnings.value += 10000;
                            showNotify(`üéä –í–∞—à –¥—Ä—É–≥ ${newFriend.name} –¥–æ—Å—Ç–∏–≥ 1M TIM! –í—ã –ø–æ–ª—É—á–∞–µ—Ç–µ 10,000 TIM –±–æ–Ω—É—Å–∞!`, 'premium');
                            saveGame();
                        }, 2000);
                    }
                    
                    showNotify(`üëã –î—Ä—É–≥ ${newFriend.name} –¥–æ–±–∞–≤–ª–µ–Ω! –í—ã –º–æ–∂–µ—Ç–µ –∑–∞–±—Ä–∞—Ç—å –±–æ–Ω—É—Å.`);
                    saveGame();
                }
                
                // –§—É–Ω–∫—Ü–∏–∏ –∫—Ä–∏–ø—Ç–æ –∏ –∫–æ—à–µ–ª—å–∫–∞
                function convertTokens() {
                    const amount = parseFloat(convertAmount.value);
                    if (amount < 1000000 || coins.value < amount) {
                        showNotify('–ú–∏–Ω–∏–º—É–º 1,000,000 TIM –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏', 'error');
                        return;
                    }
                    const tokens = Math.floor(amount / 1000000);
                    coins.value -= amount;
                    realTokens.value += tokens;
                    convertAmount.value = '';
                    showNotify(`–ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –≤ ${tokens} MRT!`, 'success');
                    saveGame();
                }
                
                function withdrawTokens() {
                    const amount = parseFloat(withdrawAmount.value);
                    if (amount < 10 || realTokens.value < amount) {
                        showNotify('–ú–∏–Ω–∏–º—É–º 10 MRT –¥–ª—è –≤—ã–≤–æ–¥–∞', 'error');
                        return;
                    }
                    if (!polygonWalletAddress.value) {
                        showNotify('–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫', 'error');
                        openFullscreen('wallet');
                        return;
                    }
                    realTokens.value -= amount;
                    withdrawAmount.value = '';
                    showNotify(`–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ ${amount} MRT –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!`, 'success');
                    saveGame();
                }
                
                function saveWallet() {
                    if (!isValidWallet.value) {
                        showNotify('–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∞–¥—Ä–µ—Å–∞', 'error');
                        return;
                    }
                    polygonWalletAddress.value = polygonWalletInput.value.trim();
                    localStorage.setItem('timWallet', polygonWalletAddress.value);
                    polygonWalletInput.value = '';
                    showNotify('–ö–æ—à–µ–ª–µ–∫ —Å–æ—Ö—Ä–∞–Ω–µ–Ω!');
                    saveGame();
                }
                
                function copyWallet() {
                    if (!polygonWalletAddress.value) return;
                    navigator.clipboard.writeText(polygonWalletAddress.value)
                        .then(() => showNotify('–ê–¥—Ä–µ—Å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω!'))
                        .catch(() => showNotify('–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è', 'error'));
                }
                
                // –§—É–Ω–∫—Ü–∏–∏ Telegram Stars
                function buyStars(amount) {
                    telegramStars.value += amount;
                    showNotify(`–ö—É–ø–ª–µ–Ω–æ ${amount} Telegram Stars!`, 'premium');
                    saveGame();
                }
                
                function buyTimForStars(starsCost, timAmount) {
                    if (telegramStars.value < starsCost) {
                        showNotify('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–≤–µ–∑–¥!', 'error');
                        return;
                    }
                    telegramStars.value -= starsCost;
                    coins.value += timAmount;
                    showNotify(`–ö—É–ø–ª–µ–Ω–æ ${formatNumber(timAmount)} TIM –∑–∞ ${starsCost} –∑–≤–µ–∑–¥!`, 'premium');
                    saveGame();
                }
                
                // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
                function setPage(page) {
                    activePage.value = page;
                    fullscreenPage.value = '';
                }
                
                function openFullscreen(page) {
                    fullscreenPage.value = page;
                }
                
                function closeFullscreen() {
                    fullscreenPage.value = '';
                }
                
                // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞
                function saveGame() {
                    const gameData = {
                        coins: coins.value, profitPerTap: profitPerTap.value, autoClickers: autoClickers.value,
                        realTokens: realTokens.value, telegramStars: telegramStars.value, friends: friends.value,
                        upgrades: upgrades.value, cryptoMinerLevel: cryptoMinerLevel.value,
                        cryptoMinerActive: cryptoMinerActive.value, cryptoMinerEndTime: cryptoMinerEndTime.value,
                        ads: ads.value, totalAdEarnings: totalAdEarnings.value, totalReferralEarnings: totalReferralEarnings.value,
                        lastSave: Date.now()
                    };
                    localStorage.setItem('timClickerSave', JSON.stringify(gameData));
                }
                
                function loadGame() {
                    const saved = localStorage.getItem('timClickerSave');
                    if (saved) {
                        try {
                            const gameData = JSON.parse(saved);
                            coins.value = gameData.coins || 0;
                            profitPerTap.value = gameData.profitPerTap || 1;
                            autoClickers.value = gameData.autoClickers || 0;
                            realTokens.value = gameData.realTokens || 0;
                            telegramStars.value = gameData.telegramStars || 0;
                            friends.value = gameData.friends || [];
                            upgrades.value = gameData.upgrades || upgrades.value;
                            cryptoMinerLevel.value = gameData.cryptoMinerLevel || 0;
                            cryptoMinerActive.value = gameData.cryptoMinerActive || false;
                            cryptoMinerEndTime.value = gameData.cryptoMinerEndTime || 0;
                            ads.value = gameData.ads || ads.value;
                            totalAdEarnings.value = gameData.totalAdEarnings || 0;
                            totalReferralEarnings.value = gameData.totalReferralEarnings || 0;
                            
                            if (cryptoMinerActive.value && Date.now() > cryptoMinerEndTime.value) {
                                cryptoMinerActive.value = false;
                            }
                        } catch (e) {
                            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏:', e);
                        }
                    }
                    const wallet = localStorage.getItem('timWallet');
                    if (wallet) polygonWalletAddress.value = wallet;
                }
                
                function resetGame() {
                    coins.value = 0; profitPerTap.value = 1; autoClickers.value = 0; realTokens.value = 0;
                    telegramStars.value = 0; friends.value = []; upgrades.value = [
                        { id: 1, name: '–£—Å–∏–ª–∏—Ç–µ–ª—å –∫–ª–∏–∫–∞', description: '+0.5 TIM –∑–∞ –∫–ª–∏–∫', cost: 1000, level: 0 },
                        { id: 2, name: '–ê–≤—Ç–æ–º–∞–π–Ω–µ—Ä', description: '+5 TIM –≤ –º–∏–Ω—É—Ç—É', cost: 5000, level: 0 },
                        { id: 3, name: '–ú–Ω–æ–∂–∏—Ç–µ–ª—å', description: 'x1.5 –¥–æ—Ö–æ–¥ –æ—Ç –∫–ª–∏–∫–æ–≤', cost: 25000, level: 0 }
                    ];
                    cryptoMinerLevel.value = 0; cryptoMinerActive.value = false; cryptoMinerEndTime.value = 0;
                    ads.value = {
                        daily: { available: true, reward: 50000, cooldown: 0, watchedToday: 0 },
                        hourly: { available: true, reward: 10000, cooldown: 0 },
                        big: { available: true, reward: 200000 },
                        instant: { available: true, reward: 5000 }
                    };
                    totalAdEarnings.value = 0; totalReferralEarnings.value = 0;
                    activePage.value = 'click';
                }
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
                function startAutoClickers() {
                    setInterval(() => { 
                        if (autoClickers.value > 0) {
                            coins.value += autoClickers.value; 
                        }
                    }, 60000);
                    
                    setInterval(saveGame, 30000);
                    
                    setInterval(() => {
                        if (cryptoMinerActive.value && cryptoMinerTimeLeft.value <= 0) {
                            cryptoMinerActive.value = false;
                        }
                    }, 1000);
                    
                    setInterval(() => {
                        // –û–±–Ω–æ–≤–ª—è–µ–º –∫—É–ª–¥–∞—É–Ω—ã —Ä–µ–∫–ª–∞–º—ã
                        if (ads.value.daily.cooldown > 0) {
                            ads.value.daily.cooldown--;
                            if (ads.value.daily.cooldown <= 0) {
                                ads.value.daily.available = true;
                                ads.value.daily.watchedToday = 0;
                            }
                        }
                        if (ads.value.hourly.cooldown > 0) {
                            ads.value.hourly.cooldown--;
                            if (ads.value.hourly.cooldown <= 0) {
                                ads.value.hourly.available = true;
                            }
                        }
                    }, 1000);
                }
                
                onMounted(() => {
                    document.addEventListener('gesturestart', e => e.preventDefault());
                    document.addEventListener('touchmove', e => { if (e.scale !== 1) e.preventDefault(); }, { passive: false });
                    if (window.Telegram?.WebApp) {
                        const tg = window.Telegram.WebApp;
                        tg.ready(); tg.expand();
                        const user = tg.initDataUnsafe?.user;
                        if (user) userId.value = 'user_' + user.id;
                    }
                    loadGame();
                    startAutoClickers();
                    setTimeout(() => isReady.value = true, 800);
                });
                
                return {
                    isReady, coins, profitPerTap, autoClickers, activePage, fullscreenPage, realTokens,
                    polygonWalletAddress, polygonWalletInput, convertAmount, withdrawAmount, friends, userId,
                    telegramStars, cryptoMinerLevel, cryptoMinerActive, cryptoEffects, ads, adWatching,
                    adEffects, notification, upgrades, totalReferralEarnings, totalPassiveEarnings,
                    totalAdEarnings,
                    isValidWallet, cryptoMinerTimeLeft, cryptoMinerCost, currentCryptoChance,
                    formatNumber, formatTime, mine, buyUpgrade, activateCryptoMiner, watchAd, generateInvite,
                    copyReferral, claimFriendBonus, addFriend, convertTokens, withdrawTokens, saveWallet,
                    copyWallet, buyStars, buyTimForStars, setPage, openFullscreen, closeFullscreen, showNotify
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
